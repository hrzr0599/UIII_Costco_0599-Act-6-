{% extends "base.html" %}
{% block content %}
<h2>Lista de Productos</h2>
<a class="btn btn-success mb-3" href="{% url 'agregar_producto' %}">+ Agregar Producto</a>
<table class="table table-hover">
  <thead>
    <tr>
      <th>ID</th>
      <th>Imagen</th>
      <th>Nombre</th>
      <th>Descripción</th>
      <th>Precio</th>
      <th>Stock</th>
      <th>Proveedor</th>
      <th>Categoría</th>
      <th>Código de barras</th>
      <th>Fecha Agregado</th>
      <th>Acciones</th>
    </tr>
  </thead>
  <tbody>
    {% for p in productos %}
    <tr>
      <td>{{ p.id }}</td>
      <td>
        {% if p.imagen_url %}
          <img src="{{ p.imagen_url }}" width="60" height="60" style="object-fit:cover;">
        {% else %}
          <span class="text-muted">Sin imagen</span>
        {% endif %}
      </td>
      <td>{{ p.nombre }}</td>
      <td>{{ p.descripcion }}</td>
      <td>${{ p.precio }}</td>
      <td>{{ p.stock }}</td>
      <td>{% if p.proveedor %}{{ p.proveedor.nombre }}{% else %}<span class="text-muted">-</span>{% endif %}</td>
      <td>{% if p.categoria %}{{ p.categoria.nombre }}{% else %}<span class="text-muted">-</span>{% endif %}</td>
      <td>{{ p.codigo_barras }}</td>
      <td>{{ p.fecha_creacion }}</td>
      <td>
        <a class="btn btn-sm btn-info" href="{% url 'actualizar_producto' p.id %}">Editar</a>
        <a class="btn btn-sm btn-danger" href="{% url 'borrar_producto' p.id %}">Borrar</a>
      </td>
    </tr>
    {% empty %}
  <tr><td colspan="11">No hay productos.</td></tr>
    {% endfor %}
  </tbody>
</table>
{% endblock %}
