{% extends "base.html" %}
{% block content %}
<h2>Actualizar Venta</h2>
<form method="post" action="{% url 'realizar_actualizacion_ventas' venta.id %}">
  {% csrf_token %}
  <div class="mb-3">
    <label class="form-label">Producto</label>
    <select class="form-control" name="producto" required>
      <option value="">Seleccionar producto</option>
      {% for p in productos %}
      <option value="{{ p.id }}" {% if p.id == venta.producto.id %}selected{% endif %}>{{ p.nombre }}</option>
      {% endfor %}
    </select>
  </div>
  <div class="mb-3">
    <label class="form-label">Usuario (Cliente)</label>
    <select class="form-control" name="usuario" required>
      <option value="">Seleccionar usuario</option>
      {% for u in usuarios %}
      <option value="{{ u.id }}" {% if u.id == venta.usuario.id %}selected{% endif %}>{{ u.nombre }} {{ u.apellido }}</option>
      {% endfor %}
    </select>
  </div>
  <div class="mb-3">
    <label class="form-label">Vendedor (Empleado)</label>
    <select class="form-control" name="vendedor" required>
      <option value="">Seleccionar vendedor</option>
      {% for e in empleados %}
      <option value="{{ e.id }}" {% if e.id == venta.vendedor.id %}selected{% endif %}>{{ e.nombre }} {{ e.apellido }}</option>
      {% endfor %}
    </select>
  </div>
  <div class="mb-3">
    <label class="form-label">Total</label>
    <input class="form-control" name="total" type="number" step="0.01" value="{{ venta.total }}" required>
  </div>
  <div class="mb-3">
    <label class="form-label">Cantidad</label>
    <input class="form-control" name="cantidad" type="number" value="{{ venta.cantidad }}" min="1" required>
  </div>
  <div class="mb-3">
    <label class="form-label">Método de Pago</label>
    <select class="form-control" name="metodo_pago" required>
      <option value="">Seleccionar método</option>
      <option value="Efectivo" {% if venta.metodo_pago == 'Efectivo' %}selected{% endif %}>Efectivo</option>
      <option value="Tarjeta de Crédito" {% if venta.metodo_pago == 'Tarjeta de Crédito' %}selected{% endif %}>Tarjeta de Crédito</option>
      <option value="Tarjeta de Débito" {% if venta.metodo_pago == 'Tarjeta de Débito' %}selected{% endif %}>Tarjeta de Débito</option>
      <option value="Transferencia" {% if venta.metodo_pago == 'Transferencia' %}selected{% endif %}>Transferencia</option>
      <option value="Cheque" {% if venta.metodo_pago == 'Cheque' %}selected{% endif %}>Cheque</option>
    </select>
  </div>
  <div class="mb-3">
    <label class="form-label">Descuento</label>
    <input class="form-control" name="descuento" type="number" step="0.01" value="{{ venta.descuento }}">
  </div>
  <button class="btn btn-primary" type="submit">Actualizar</button>
  <a class="btn btn-secondary" href="{% url 'ver_ventas' %}">Cancelar</a>
</form>
{% endblock %}
