{% extends "base.html" %}
{% block content %}
<h2>Actualizar Pedido</h2>
<form method="post" action="{% url 'realizar_actualizacion_pedido' pedido.id %}">
  {% csrf_token %}
  <div class="mb-3">
    <label>Usuario:</label>
    <select class="form-select" name="usuario">
      {% for u in usuarios %}
        <option value="{{ u.id }}" {% if pedido.usuario.id == u.id %}selected{% endif %}>
          {{ u.nombre_usuario }}
        </option>
      {% endfor %}
    </select>
  </div>
  <div class="mb-3">
    <label>Dirección de Envío:</label>
            <option value="{{ u.id }}" {% if pedido.usuario and u.id == pedido.usuario.id %}selected{% endif %}> 
  </div>
  <div class="mb-3">
    <label>Total Pedido:</label>
    <input class="form-control" name="total_pedido" value="{{ pedido.total_pedido }}">
  </div>
      <div class="mb-3">
        <label>Producto:</label>
        <select class="form-control" name="producto">
          <option value="">Seleccionar producto</option>
          {% for prod in productos %}
          <option value="{{ prod.id }}" {% if pedido.producto and prod.id == pedido.producto.id %}selected{% endif %}>{{ prod.nombre }}</option>
          {% endfor %}
        </select>
      </div>
      <div class="mb-3">
        <label>Cantidad:</label>
        <input class="form-control" name="cantidad" type="number" value="{{ pedido.cantidad }}" min="1">
      </div>
      <div class="mb-3">
        <label>Descuento:</label>
        <input class="form-control" name="descuento" type="number" step="0.01" value="{{ pedido.descuento }}">
      </div>
    <select class="form-select" name="productos">
      {% for p in productos %}
        <option value="{{ p.id }}" {% if p in pedido.productos.all %}selected{% endif %}>
          {{ p.nombre }}
        </option>
      {% endfor %}
    </select>
  </div>
  <button class="btn btn-primary">Actualizar</button>
  <a class="btn btn-secondary" href="{% url 'ver_pedido' %}">Cancelar</a>
</form>
{% endblock %}
